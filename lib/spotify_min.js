"use strict";var SpotifyWebApi=function(){var e="https://api.spotify.com/v1",t=null,r=null,o=function(e,t){return e.abort=t,e},n=function(){var e=Array.prototype.slice.call(arguments),t=e[0],r=e.slice(1);return t=t||{},r.forEach(function(e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])}),t},a=function(e,n){var a=new XMLHttpRequest,i=function(r,o){var i=e.type||"GET";if(a.open(i,function(e,t){var r="";for(var o in t)if(t.hasOwnProperty(o)){var n=t[o];r+=encodeURIComponent(o)+"="+encodeURIComponent(n)+"&"}return r.length>0&&(e=e+"?"+(r=r.substring(0,r.length-1))),e}(e.url,e.params)),t&&a.setRequestHeader("Authorization","Bearer "+t),a.onreadystatechange=function(){if(4===a.readyState){var e=null;try{e=a.responseText?JSON.parse(a.responseText):""}catch(e){console.error(e)}a.status>=200&&a.status<300?function(e){r&&r(e),n&&n(null,e)}(e):(o&&o(a),n&&n(a,null))}},"GET"===i)a.send(null);else{var p=null;e.postData&&("image/jpeg"===e.contentType?(p=e.postData,a.setRequestHeader("Content-Type",e.contentType)):(p=JSON.stringify(e.postData),a.setRequestHeader("Content-Type","application/json"))),a.send(p)}};return n?(i(),null):function(e,t){var n;if(null!==r){var a=r.defer();e(function(e){a.resolve(e)},function(e){a.reject(e)}),n=a.promise}else window.Promise&&(n=new window.Promise(e));return n?new o(n,t):null}(i,function(){a.abort()})},i=function(e,t,r,o){var i={},p=null;return"object"==typeof t?(i=t,p=r):"function"==typeof t&&(p=t),"GET"!==(e.type||"GET")&&e.postData&&!o?e.postData=n(e.postData,i):e.params=n(e.params,i),a(e,p)},p=function(){};return(p.prototype={constructor:SpotifyWebApi}).getGeneric=function(e,t){return i({url:e},t)},p.prototype.getCategoryPlaylists=function(t,r,o){return i({url:e+"/browse/categories/"+t+"/playlists"},r,o)},p.prototype.getCategories=function(t,r){return i({url:e+"/browse/categories"},t,r)},p.prototype.getUserPlaylists=function(t,r,o){var n;return"string"==typeof t?n={url:e+"/users/"+encodeURIComponent(t)+"/playlists"}:(n={url:e+"/me/playlists"},o=r,r=t),i(n,r,o)},p.prototype.transferMyPlayback=function(t,r,o){var n=r||{};return n.device_ids=t,i({type:"PUT",url:e+"/me/player",postData:n},r,o)},p.prototype.getMySavedTracks=function(t,r){return i({url:e+"/me/tracks"},t,r)},p.prototype.addToMySavedTracks=function(t,r,o){return i({url:e+"/me/tracks",type:"PUT",postData:t},r,o)},p.prototype.ClearSRQueue=async function(){return localStorage.setItem("srqueue",JSON.stringify([])),1},p.prototype.removeFromMySavedTracks=function(t,r,o){return i({url:e+"/me/tracks",type:"DELETE",postData:t},r,o)},p.prototype.getMyTopTracks=function(t,r){return i({url:e+"/me/top/tracks"},t,r)},p.prototype.getMyRecentlyPlayedTracks=function(t,r){return i({url:e+"/me/player/recently-played"},t,r)},p.prototype.getPlaylist=function(t,r,o){return i({url:e+"/playlists/"+t},r,o)},p.prototype.getPlaylistTracks=function(t,r,o){return i({url:e+"/playlists/"+t+"/tracks"},r,o)},p.prototype.getPlaylistCoverImage=function(t,r){return i({url:e+"/playlists/"+t+"/images"},r)},p.prototype.getRecommendations=function(t,r){return i({url:e+"/recommendations"},t,r)},p.prototype.getAvailableGenreSeeds=function(t){return i({url:e+"/recommendations/available-genre-seeds"},{},t)},p.prototype.createPlaylist=function(t,r,o){var n={url:e+"/users/"+encodeURIComponent(t)+"/playlists",type:"POST",postData:r};return i(n,r,o)},p.prototype.addTracksToPlaylist=function(t,r,o,n){return i({url:e+"/playlists/"+t+"/tracks",type:"POST",postData:{uris:r}},o,n,!0)},p.prototype.removeTracksFromPlaylistInPositions=function(t,r,o,n){return i({url:e+"/playlists/"+t+"/tracks",type:"DELETE",postData:{positions:r,snapshot_id:o}},{},n)},p.prototype.getTrack=function(t,r,o){var n={};return n.url=e+"/tracks/"+t,i(n,r,o)},p.prototype.search=function(t,r,o,n){var a={url:e+"/search/",params:{q:t[0],type:t[1]}};return i(a,o,n)},p.prototype.searchAlbums=function(e,t,r){return this.search(e,["album"],t,r)},p.prototype.searchArtists=function(e,t,r){return this.search(e,["artist"],t,r)},p.prototype.searchTracks=function(e,t,r){return this.search(e,["track"],t,r)},p.prototype.searchPlaylists=function(e,t,r){return this.search(e,["playlist"],t,r)},p.prototype.getAudioFeaturesForTrack=function(t,r){var o={};return o.url=e+"/audio-features/"+t,i(o,{},r)},p.prototype.getMyCurrentPlaybackState=function(t,r){return i({url:e+"/me/player"},t,r)},p.prototype.getMyCurrentPlayingTrack=function(t,r){return i({url:e+"/me/player/currently-playing"},t,r)},p.prototype.play=function(t,r){var o="device_id"in(t=t||{})?{device_id:t.device_id}:null,n={};["context_uri","uris","offset","position_ms"].forEach(function(e){e in t&&(n[e]=t[e])});var a={type:"PUT",url:e+"/me/player/play",params:o,postData:n};return console.log(a),i(a,"function"==typeof t?t:{},r)},p.prototype.queue=function(t,r,o){var n="device_id"in(r=r||{})?{uri:t,device_id:r.device_id}:{uri:t};return i({type:"POST",url:e+"/me/player/queue",params:n},r,o)},p.prototype.pause=function(t,r){var o="device_id"in(t=t||{})?{device_id:t.device_id}:null;return i({type:"PUT",url:e+"/me/player/pause",params:o},t,r)},p.prototype.skipToNext=function(t,r){var o="device_id"in(t=t||{})?{device_id:t.device_id}:null;return i({type:"POST",url:e+"/me/player/next",params:o},t,r)},p.prototype.skipToPrevious=function(t,r){var o="device_id"in(t=t||{})?{device_id:t.device_id}:null;return i({type:"POST",url:e+"/me/player/previous",params:o},t,r)},p.prototype.seek=function(t,r,o){var n={position_ms:t};return"device_id"in(r=r||{})&&(n.device_id=r.device_id),i({type:"PUT",url:e+"/me/player/seek",params:n},r,o)},p.prototype.setRepeat=function(t,r,o){var n={state:t};return"device_id"in(r=r||{})&&(n.device_id=r.device_id),i({type:"PUT",url:e+"/me/player/repeat",params:n},r,o)},p.prototype.setVolume=function(t,r,o){var n={volume_percent:t};return"device_id"in(r=r||{})&&(n.device_id=r.device_id),i({type:"PUT",url:e+"/me/player/volume",params:n},r,o)},p.prototype.getMyDevices=function(t){return i({url:e+"/me/player/devices"},{},t)},p.prototype.setShuffle=function(t,r,o){var n={state:t};return"device_id"in(r=r||{})&&(n.device_id=r.device_id),i({type:"PUT",url:e+"/me/player/shuffle",params:n},r,o)},p.prototype.getAccessToken=function(){return t},p.prototype.setAccessToken=function(e){t=e},p.prototype.setPromiseImplementation=function(e){var t=!1;try{var o=new e(function(e){e()});"function"==typeof o.then&&"function"==typeof o.catch&&(t=!0)}catch(e){console.error(e)}if(!t)throw new Error("Unsupported implementation of Promises/A+");r=e},p}();"object"==typeof module&&"object"==typeof module.exports&&(module.exports=SpotifyWebApi);